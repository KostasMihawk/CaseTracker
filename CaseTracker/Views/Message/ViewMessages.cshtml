
@{
    ViewBag.Title = "ViewMessages";
}

<h2>ViewMessages</h2>

<div id="tableIn"></div>
@*<table class="table table-striped table-bordered" cellspacing="0">
    <thead>
        <tr>
            <th class="th-sm">
                <span>Message ID</span>
            </th>
            <th class="th-sm">
                <span>Message</span>
            </th>
        </tr>
    </thead>
    <tbody id="tbody">

    </tbody>
</table>*@

@section scripts{
    <script>
        $(document).ready(function () {
            
            $.ajax({
                type: "GET",
                url: "/api/Message",
                dataType: "json",
                success: function (data) {
                    var numberOfRows = data.length;
                    var k = 0;
                    var table_body = '<table class="table table-striped table-bordered" cellspacing="0"><thead><tr><th class="th-sm">Message ID</th><th class="th-sm">Message</th></tr></thead><tbody>';
                    for (j in data) {
                        table_body += '<tr>';

                        table_body += '<td>';
                        table_body += data[k]["$id"];
                        table_body += '</td>';

                        table_body += '<td>';
                        table_body += data[k]["body"];
                        table_body += '</td>';

                        table_body += '</tr>';

                        k++;
                    }
                    table_body += '</tbody></table>';
                    $('#tableIn').html(table_body);
                } 
                
            });
        });
    </script>    
}